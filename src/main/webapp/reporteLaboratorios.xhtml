<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
xmlns:h="http://xmlns.jcp.org/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:f="http://java.sun.com/jsf/core">
 <h:head><title>Reporte de Laboratorios</title>
  	<style type="text/css">
 		.my_test li{
 			display:inline;
 			padding:10px;
 			margin:10px;
 		}
 		.pers{
 			color:white; 
 			background:#1B8344;
 			padding:5px;
 			margin:5px;	
 			width:100%;
 		}
 		.pers ul li{
 			padding:5px;
 			margin:5px;
 		}
 		.temp{
 			font-size:20px;
 		}
 		.ui-datatable-data tr td{
 			background:white;
 		}
 		.ui-paginator{
 			background:white;
 		}
 		.ui-datatable-tablewrapper table thead tr th{
 			background:	#1B8344;
 			color:white;
 		}
 		.pers{
			width:100%;
			background:#1B8344;
		}
 	</style>
 </h:head>
 
 <h:body style= "margin:0px; padding:0px;">
 <img src="labinfo.jpg" style="width:250px;"></img>
 <br></br>
 
 	<h:form>
 		<div style="margin:0px; padding:5px; background:#1B8344; width:100%">
 			<div style="text-align:right;">
				<ul class="my_test">
					<li><a href="useradmin.xhtml" style="color:white">Regresar</a></li>
					<li style="color:white;">#{sesBean.getUsuario().getNombre()} #{sesBean.getUsuario().getApellido()}</li>
					<li><h:commandLink value="Log out" actionListener="#{sesBean.logout()}" style="color:white; background:gray; padding:10px;"></h:commandLink></li>
				</ul>
			</div>
 		</div>
	</h:form>
	<center><h1>Reporte de Laboratorios</h1></center>
	<br></br>
	<h3>En este formulario usted podra ver la informacion de los laboratorios registrados</h3>
	<h:form>
	<p:dataTable value="#{reportLabBean.getTotalLaboratorios()}" var="lab" paginator="true" rows="6">
		<p:column headerText="Codigo" sortBy="#{lab.getId()}" filterBy="#{lab.getId()}">
			#{lab.getId()}
		</p:column>
		
		<p:column headerText="Nombre" sortBy="#{lab.getNombre()}" filterBy="#{lab.getNombre()}">
			#{lab.getNombre()}
		</p:column>
		
		<p:column headerText="Cantidad de Equipos" sortBy="#{reportLabBean.cantidadEquipos(lab)}" filterBy="#{reportLabBean.cantidadEquipos(lab)}">
			#{reportLabBean.cantidaEquipos(lab)}	
		</p:column>
				
		<p:column headerText="Estado" sortBy="#{lab.getFechaCierre() eq null}" filterBy="#{lab.getFechaCierre() eq null}">
			#{lab.getFechaCierre() eq null}
		</p:column>
		
		<p:column headerText="Fecha de Creacion" sortBy="#{lab.getFechaApertura()}" filterBy="#{lab.getFechaApertura()}">
			#{lab.getFechaApertura()}
		</p:column>
		<p:column headerText="Fecha de Cierre" sortBy="#{lab.getFechaCierre()}" filterBy="#{lab.getFechaCierre()}">
			#{lab.getFechaCierre()}
		</p:column>
		
		 <p:column headerText="Reporte de Laboratorio">
			<p:button outcome="reportesLaboratorio" value="Ver Reporte" >
				<f:param value="#{lab.getId()}" name="laboratorio" ></f:param>
			</p:button>
		</p:column>
		
	</p:dataTable>
	<br></br>
	<H3>Graficas de informacion basica y detalla de los laboratorios </H3>
	<br></br>
	<br></br>
	<div align="center">
		  
	    <p:panelGrid columns="1" >
	    <p:outputLabel value="Informacion de cuantos elementos tiene cada laboratorio"/>
	    <p:commandButton id="imageBtn" value="Grafica" type="button" /><p:overlayPanel id="imagePanel" for="imageBtn" hideEffect="fade"><p:donutChart model="#{reportLabBean.donutModel}" style="width: 100%; height: 400px;"/></p:overlayPanel>
	    </p:panelGrid>
	    
	</div>
	<br></br>
	<br></br>
	<div align="center"> 
	    <p:panelGrid columns="1" >
	    <p:outputLabel value="Estadistica de cuantos equipo han registrado por mes en los laboratorios" />
	    <p:commandButton id="grafica" value="Grafica" type="button" /><p:overlayPanel id="imageP" for="grafica" hideEffect="fade"><p:barChart model="#{reportLabBean.barModel}" style="width: 100%; height: 400px;"/></p:overlayPanel>
	    </p:panelGrid>
	</div>
	<br></br>
	</h:form>
	<br></br>	
	<div class="pers">
		Algunos enlaces de interes:<br></br>
		<ul>
			<li><a href="https://www.escuelaing.edu.co/es/" style="color:white;">Escuela Colombiana de Ingenieria Julio Garavito.</a></li>
			<li><a href="http://laboratorio.is.escuelaing.edu.co/" style="color:white">Laboratorio de informatica</a></li>
		</ul>
	</div>		
 </h:body>
</html>